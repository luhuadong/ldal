# LDAL

Linux 设备抽象层（Linux Device Abstraction Layer ），是一套基于 Linux 的外部设备管理、测试框架，并为应用提供统一的 API 操作接口，简化应用开发。

- 方案一：类型链表 + 设备链表
- 方案二：数组 + 不同类型的设备链表 * n


## 特性

- 依赖于设备节点（如 /dev/ttyUSB0）
- 线程安全，支持多线程并发访问
- 支持注册多个同类型设备
- 异步操作
- 接口简单
- 控制任务线程化
- 支持中断调用



## 支持设备

|    类型     | 描述                                           | 备注 |
| :---------: | ---------------------------------------------- | ---- |
|   Serial    | 设备节点如 /dev/ttyUSB0，包括 RS-232 和 RS-485 |      |
|    GPIO     |                                                |      |
|     RTC     | 实时时钟                                       |      |
| Anlog Input | 模拟量输入                                     |      |
|             |                                                |      |
|             |                                                |      |
|             |                                                |      |
|             |                                                |      |
|             |                                                |      |


## 工作流程

1. 将需要用到的设备类型注册到 class 链表（数组）（自动注册？还是应用程序注册？）
2. Class 链表初始化，表明当前系统有哪些类型的设备
3. 


## 测试工具

list_devices 命令行工具


## 设计


![](./images/linux-device-astration-layer-list.png)
